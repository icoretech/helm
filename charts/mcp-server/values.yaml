##

# Control deployment of the Unla subchart (gateway + dashboard)
# By default it's enabled; set to false to skip installing it and
# also disable related registration hooks in this chart.
unla:
  enabled: true

# Unla subchart provides the gateway + dashboard. This chart only runs
# your MCP servers. One Deployment/Service is created for each entry in
# servers[]. Each server should expose HTTP/SSE or WebSocket (stdio not supported).
#
# Define your MCP servers (one Deployment per entry)
servers: []
# - name: everything
#   port: 3001   # if omitted, defaults: node=3001, python=3000, image=3000 (not used for openapi)
#   replicas: 1   # per-server replicas (default 1)
#   env: []      # optional per-container env vars [{name: FOO, value: bar}]
#   imagePullSecrets: []  # e.g. [{name: myregistry}]
#   podLabels: {}
#   podAnnotations: {}
#   podSecurityContext: {}
#   nodeSelector: {}
#   tolerations: []
#   affinity: {}
#   serviceAccountName: "" # to use a non-default SA
#   register:
#     enabled: true
#     tenant: default
#     prefix: "/gateway/everything"   # router prefix exposed by the gateway
#     type: streamable-http            # or sse
#     path: "/mcp"                    # default /mcp for streamable-http, /sse for sse
#     headers: {}                      # optional HTTP headers for apiserver API
#   config:
#     enabled: false
#     filename: config.toml
#     mountPath: /config
#     contents: |
#       # per-server config example
#       # [server]
#       # port = 3000
#   cache:                    # optional dependency cache
#     enabled: false
#     mountPath: /cache
#     pvc:
#       size: 1Gi
#       storageClassName: null
#       accessModes: [ReadWriteOnce]
#       existingClaim: ""
#   node:
#     package: "@modelcontextprotocol/server-everything"
#     version: "latest"
#     args: ["streamableHttp"]
#     tag: 24-alpine
#
# - name: aws-docs
#   port: 3000
#   register:
#     enabled: true
#   python:
#     package: "awslabs.aws-documentation-mcp-server@latest"
#     fromGit: ""
#     args: ["--transport","streamable-http","--host","0.0.0.0","--port","3000"]
#     tag: python3.12-bookworm-slim
#
# - name: custom
#   port: 3000
#   register:
#     enabled: false   # deploy without registering to the gateway (debug)
#   image:
#     repository: nginx
#     tag: latest
#     command: []
#     args: []
#   resources: {}            # per-container resources
#   securityContext: {}      # per-container security context
#   extraVolumes: []         # additional pod volumes (e.g., config/secret/emptyDir)
#   extraVolumeMounts: []    # additional mounts for the container

#   # Optional: bridge stdio-only servers to HTTP (SSE) using an adapter
#   # This runs an HTTP proxy that spawns the stdio MCP server as a child
#   # process and keeps the session alive. Useful for packages that only
#   # support stdio and exit otherwise when no client is attached.
#   stdioBridge:
#     enabled: false
#     image: ghcr.io/icoretech/mcp-stdio-bridge
#     tag: 0.2.1
#     port: 3000                 # container port to expose HTTP (SSE)
#     passEnvironment: true      # pass container env to child process
#     proxyArgs: []              # extra flags for the proxy (e.g., ["--sse-path","/sse"])
#     serverCommand: []          # REQUIRED: command to launch stdio server, e.g., ["uvx","awslabs.aws-documentation-mcp-server@latest"]
#     serverArgs: []             # optional args for the stdio server command

# - name: petstore
#   register:
#     enabled: true
#     type: openapi
#     prefix: "/gateway/petstore"
#   openapi:
#     url: "https://petstore3.swagger.io/api/v3/openapi.json" # External OpenAPI URL provisioned in Unla

# Unla subchart manages the MCP gateway and its exposure.


##

# Overrides the chart name for resources
nameOverride: ""
# Completely overrides the generated name
fullnameOverride: ""

# Per-server probes/resources/securityContext/scheduling may be set under each
# servers[] entry. This chart has no root-level gateway/service/ingress.
